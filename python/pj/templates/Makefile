### generated by Jinja2 template, used by prun
{%-for ced_key, ced_value in CED|dictsort%}
{{ced_key}} = {{ced_value}}
{%-endfor%}

dir_guard = @mkdir -p ${@D}
cd_guard = @cd ${@D}

### c targets
{%-if c_lst%}
{%-for c in c_lst%}
${OUTPUT_CLIB}/{{c}}.o: ${MODULE_C}/{{c}}.c
	${dir_guard}
	${cd_guard} && gcc {{c_opts}} -I${VCS_HOME}/include -c $<
{%-endfor%}
${OUTPUT_CLIB}/uvm_dpi.o: ${UVM_HOME}/src/dpi/uvm_dpi.cc
	${dir_guard}
	${cd_guard} && g++ {{c_opts}} -I${VCS_HOME}/include -c $<
${OUTPUT_CLIB}/lib${MODULE}.so: \
{%-for c in c_lst%}
${OUTPUT_CLIB}/{{c}}.o \
{%-endfor%}
${OUTPUT_CLIB}/uvm_dpi.o
	${dir_guard}
	${cd_guard} && gcc -shared -o $@ $^
compile_c: ${OUTPUT_CLIB}/lib${MODULE}.so
{%-endif%}
